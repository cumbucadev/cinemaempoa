{% extends "base.html" %}
{% block meta_tags %}
    <meta name="description"
          content="Programação de fim de semana para as salas de cinema alternativo em Porto Alegre. Sexta, sábado e domingo.">
{% endblock meta_tags %}
{% block header %}
    <h1>
        {% block title %}
            Fim de Semana
        {% endblock title %}
    </h1>
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="{{ url_for("screening.programacao") }}">Programação</a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">Fim de Semana</li>
        </ol>
    </nav>
{% endblock header %}
{% block content %}
    <p>Filmes que vão passar nos cinemas alternativos de Porto Alegre nesse fim de semana (sexta, sábado e domingo).</p>
    {% set friday_screenings = [] %}
    {% set saturday_screenings = [] %}
    {% set sunday_screenings = [] %}
    {% for screening_date in screening_dates %}
        {% if screening_date.date.weekday() == 4 %}
            {% set _ = friday_screenings.append(screening_date) %}
        {% elif screening_date.date.weekday() == 5 %}
            {% set _ = saturday_screenings.append(screening_date) %}
        {% elif screening_date.date.weekday() == 6 %}
            {% set _ = sunday_screenings.append(screening_date) %}
        {% endif %}
    {% endfor %}
    <!-- Friday -->
    <div class="col-md-6 mb-4">
        <h3 class="mb-3">Sexta-feira {{ friday_date.strftime("%d/%m") }}</h3>
        {% if friday_screenings %}
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Filme</th>
                            <th>Cinema</th>
                            <th>Horário</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for screening_date in friday_screenings %}
                            <tr>
                                {# djlint:off #}<td style="max-width: 270px;">{{ screening_date.screening.movie.title }}</td>{# djlint:on #}
                                <td>{{ screening_date.screening.cinema.name.replace('Cinemateca', '') }}</td>
                                <td>{{ screening_date.time.replace(':', 'h') }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <p class="text-muted">Nenhuma sessão programada para sexta-feira.</p>
        {% endif %}
    </div>
    <!-- Saturday -->
    <div class="col-md-6 mb-4">
        <h3 class="mb-3">Sábado {{ saturday_date.strftime("%d/%m") }}</h3>
        {% if saturday_screenings %}
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Filme</th>
                            <th>Cinema</th>
                            <th>Horário</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for screening_date in saturday_screenings %}
                            <tr>
                                {# djlint:off #}<td style="max-width: 270px;">{{ screening_date.screening.movie.title }}</td>{# djlint:on #}
                                <td class="cinema-cell">{{ screening_date.screening.cinema.name.replace('Cinemateca', '') }}</td>
                                <td>{{ screening_date.time.replace(':', 'h') }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <p class="text-muted">Nenhuma sessão programada para sábado.</p>
        {% endif %}
    </div>
    <!-- Sunday -->
    <div class="col-md-6 mb-4">
        <h3 class="mb-3">Domingo {{ sunday_date.strftime("%d/%m") }}</h3>
        {% if sunday_screenings %}
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Filme</th>
                            <th>Cinema</th>
                            <th>Horário</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for screening_date in sunday_screenings %}
                            <tr>
                                {# djlint:off #}<td style="max-width: 270px;">{{ screening_date.screening.movie.title }}</td>{# djlint:on #}
                                <td class="cinema-cell">{{ screening_date.screening.cinema.name.replace('Cinemateca', '') }}</td>
                                <td>{{ screening_date.time.replace(':', 'h') }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <p class="text-muted">Nenhuma sessão programada para domingo.</p>
        {% endif %}
    </div>
{% endblock content %}
